# PLAN.md
# Winter Fairy's Wishbox — MCP-UI Server Plan
# IMPORTANT: This document defines the plan ONLY.
# Goose must NOT write any code during planning.

---

## 1. Purpose
This plan defines the architecture and implementation steps for the Winter Fairy’s Wishbox MCP-UI server. The server will allow users to add, view, grant, and remove wishes, and will render a magical winter-themed UI directly inside Goose.

---

## 2. Rules for Goose During Planning
- Do NOT generate code.
- Do NOT create files.
- Do NOT scaffold directories.
- Only describe structure and decisions.
- Wait for human approval before implementation.

---

## 3. Tech Stack
- TypeScript
- FastMCP framework
- MCP-UI for rendering
- Node.js runtime
- In-memory wish storage (array)

---
## 3.1 Installation & Build Requirements
The project must include the following installation and build steps:

1. Install dependencies:
   npm install fastmcp
   npm install -D typescript ts-node @types/node

2. Development:
   npm run dev
   - Runs the FastMCP server using ts-node or tsx

3. Build:
   npm run build
   - Compiles TypeScript into the dist/ folder

4. Production:
   npm start
   - Runs the compiled server from dist/server.js

## 4. Features

### 4.1 Add Wish
- Input: wish text, category, priority
- Output: updated UI

### 4.2 List Wishes
- Output: full wishbox UI

### 4.3 Grant Wish
- Mark wish as granted
- Output: updated UI

### 4.4 Remove Wish
- Remove wish by ID or text
- Output: updated UI

---

## 5. Data Model

### Wish
interface Wish { id: string; text: string; category: "toy" | "experience" | "kindness" | "magic"; priority: "dream" | "hopeful" | "small"; granted: boolean; }


Stored in an in-memory array.

---

## 6. UI Rendering
UI will use MCP-UI JSON components:

- Title panel: “✨ Winter Fairy’s Wishbox ✨”
- Each wish displayed with:
  - Icon based on priority
  - Category label
  - Status (granted or awaiting magic)
- Dream wishes glow
- Granted wishes show a checkmark and sparkle

UI will be generated by helper functions in `ui.ts`.

Error UI Requirements:
- If a wish cannot be found, display a panel with:
  - ❗ A friendly error message
  - A suggestion to list wishes
- If required fields are missing, display:
  - ⚠️ A validation warning panel

---

## 7. File Structure
No files should be created during planning.
day17/ src/ server.ts types.ts wishes.ts ui.ts package.json tsconfig.json README.md PLAN.md .goosehints

---

## 8. Implementation Steps

1. Initialize project with package.json and tsconfig.json  
2. Create package.json with scripts:
    - "dev": "ts-node src/server.ts" or "tsx src/server.ts"
    - "build": "tsc"
    - "start": "node dist/server.js"

3. Create tsconfig.json with:
    {
      "compilerOptions": {
        "target": "ES2020",
        "module": "ESNext",
        "rootDir": "src",
        "outDir": "dist",
        "strict": true,
        "esModuleInterop": true
      }
    }
4. Create TypeScript interfaces in `types.ts`  
5. Create in-memory wish store in `wishes.ts`  
6. Implement UI rendering helpers in `ui.ts`  
7. Implement FastMCP server in `server.ts`  
8. Register tools:
   - addWish
   - listWishes
   - grantWish
   - removeWish
9. Ensure each tool returns an MCP-UI view  
10. Test locally with `npm run dev`  
11. Verify UI renders correctly in Goose  

---

## 9. Final Reminder
Goose must NOT generate code until human approval is granted for this plan. The plan must include installation, build, and run instructions so the server can be executed locally.
